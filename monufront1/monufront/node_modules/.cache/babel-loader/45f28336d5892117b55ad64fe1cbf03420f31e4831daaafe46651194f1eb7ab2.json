{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\mohan\\\\OneDrive\\\\Documents\\\\Hackathon_Project\\\\monufront1\\\\monufront\\\\src\\\\components\\\\OTPInput.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from 'react';\nimport axios from 'axios';\nimport { useNavigate, Link } from \"react-router-dom\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst OTPInput = ({\n  setToggleOtp,\n  email,\n  url,\n  handleHidden\n}) => {\n  _s();\n  const [otp, setOtp] = useState(new Array(4).fill(''));\n  const inputsRef = useRef([]);\n  const navigate = useNavigate();\n  const handleChange = (element, index) => {\n    const value = element.value.replace(/[^0-9]/g, '');\n    if (value) {\n      setOtp(prev => {\n        const newOtp = [...prev];\n        newOtp[index] = value;\n        return newOtp;\n      });\n      if (index < otp.length - 1) {\n        inputsRef.current[index + 1].focus();\n      }\n    }\n  };\n  const handleBackspace = index => {\n    if (index > 0) {\n      setOtp(prev => {\n        const newOtp = [...prev];\n        newOtp[index] = '';\n        return newOtp;\n      });\n      inputsRef.current[index - 1].focus();\n    }\n  };\n  const handlePaste = e => {\n    e.preventDefault();\n    const pastedData = e.clipboardData.getData('text').slice(0, 4);\n    const newOtp = [...otp];\n    pastedData.split('').forEach((char, i) => {\n      newOtp[i] = char;\n      inputsRef.current[i].value = char;\n    });\n    setOtp(newOtp);\n    inputsRef.current[newOtp.length - 1].focus();\n  };\n  const handleOtp = async e => {\n    e.preventDefault();\n    try {\n      const result = await axios.post(`${process.env.REACT_APP_BACK_URL}/api/agency/${url}`, {\n        email: email,\n        otpCode: otp.join('')\n      }, {\n        withCredentials: true // Ensure cookies are sent with requests\n      });\n\n      // console.log(result.data); // Handle success\n      if (url === 'verify-otp-forgot') {\n        handleHidden();\n      } else {\n        navigate(\"/\");\n        window.location.reload();\n      }\n    } catch (error) {\n      setToggleOtp(false);\n      console.error(\"There was an error!\", error); // Handle error\n    }\n  };\n  useEffect(() => {\n    inputsRef.current[0].focus();\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"max-w-md mx-auto text-center bg-white px-4 sm:px-8 py-10 rounded-xl shadow\",\n    children: [/*#__PURE__*/_jsxDEV(\"header\", {\n      className: \"mb-8\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        className: \"text-2xl font-bold mb-1\",\n        children: \"Mail Verification\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-[15px] text-slate-500\",\n        children: \"Enter the 4-digit verification code that was sent to your mail.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      id: \"otp-form\",\n      onSubmit: handleOtp,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center justify-center gap-3\",\n        children: otp.map((data, index) => /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          maxLength: \"1\",\n          value: otp[index],\n          onChange: e => handleChange(e.target, index),\n          onKeyDown: e => {\n            if (e.key === 'Backspace' || e.key === 'Delete') handleBackspace(index);\n          },\n          onPaste: handlePaste,\n          ref: el => inputsRef.current[index] = el,\n          className: \"w-14 h-14 text-center text-2xl font-extrabold text-slate-900 bg-slate-100 border border-transparent hover:border-slate-200 appearance-none rounded p-4 outline-none focus:bg-white focus:border-indigo-400 focus:ring-2 focus:ring-indigo-100\"\n        }, index, false, {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 13\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"max-w-[260px] mx-auto mt-4\",\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"submit\",\n          className: \"w-full inline-flex justify-center whitespace-nowrap rounded-lg bg-indigo-500 px-3.5 py-2.5 text-sm font-medium text-white shadow-sm shadow-indigo-950/10 hover:bg-indigo-600 focus:outline-none focus:ring focus:ring-indigo-300 focus-visible:outline-none focus-visible:ring focus-visible:ring-indigo-300 transition-colors duration-150\",\n          children: \"Verify Account\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 102,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 78,\n    columnNumber: 5\n  }, this);\n};\n_s(OTPInput, \"EbXCQRqHszdSImnVU0JFP+NqC0M=\", false, function () {\n  return [useNavigate];\n});\n_c = OTPInput;\nexport default OTPInput;\nvar _c;\n$RefreshReg$(_c, \"OTPInput\");","map":{"version":3,"names":["React","useState","useEffect","useRef","axios","useNavigate","Link","jsxDEV","_jsxDEV","OTPInput","setToggleOtp","email","url","handleHidden","_s","otp","setOtp","Array","fill","inputsRef","navigate","handleChange","element","index","value","replace","prev","newOtp","length","current","focus","handleBackspace","handlePaste","e","preventDefault","pastedData","clipboardData","getData","slice","split","forEach","char","i","handleOtp","result","post","process","env","REACT_APP_BACK_URL","otpCode","join","withCredentials","window","location","reload","error","console","className","children","fileName","_jsxFileName","lineNumber","columnNumber","id","onSubmit","map","data","type","maxLength","onChange","target","onKeyDown","key","onPaste","ref","el","_c","$RefreshReg$"],"sources":["C:/Users/mohan/OneDrive/Documents/Hackathon_Project/monufront1/monufront/src/components/OTPInput.jsx"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\r\nimport axios from 'axios'\r\nimport { useNavigate, Link } from \"react-router-dom\";\r\n\r\nconst OTPInput = ({setToggleOtp,email,url,handleHidden}) => {\r\n\r\n  const [otp, setOtp] = useState(new Array(4).fill(''));\r\n  const inputsRef = useRef([]);\r\n  const navigate=useNavigate();\r\n\r\n  const handleChange = (element, index) => {\r\n    const value = element.value.replace(/[^0-9]/g, '');\r\n    if (value) {\r\n      setOtp((prev) => {\r\n        const newOtp = [...prev];\r\n        newOtp[index] = value;\r\n        return newOtp;\r\n      });\r\n      if (index < otp.length - 1) {\r\n        inputsRef.current[index + 1].focus();\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleBackspace = (index) => {\r\n    if (index > 0) {\r\n      setOtp((prev) => {\r\n        const newOtp = [...prev];\r\n        newOtp[index] = '';\r\n        return newOtp;\r\n      });\r\n      inputsRef.current[index - 1].focus();\r\n    }\r\n  };\r\n\r\n  const handlePaste = (e) => {\r\n    e.preventDefault();\r\n    const pastedData = e.clipboardData.getData('text').slice(0, 4);\r\n    const newOtp = [...otp];\r\n    pastedData.split('').forEach((char, i) => {\r\n      newOtp[i] = char;\r\n      inputsRef.current[i].value = char;\r\n    });\r\n    setOtp(newOtp);\r\n    inputsRef.current[newOtp.length - 1].focus();\r\n  };\r\n\r\n  const handleOtp = async(e) => {\r\n    e.preventDefault();\r\n    try {\r\n        const result = await axios.post(`${process.env.REACT_APP_BACK_URL}/api/agency/${url}`, {\r\n          email: email,\r\n          otpCode:otp.join('')\r\n        }, {\r\n          withCredentials: true // Ensure cookies are sent with requests\r\n        });\r\n  \r\n        // console.log(result.data); // Handle success\r\n        if(url==='verify-otp-forgot')\r\n        {\r\n            handleHidden()\r\n        }else{\r\n        navigate(\"/\");\r\n        window.location.reload();\r\n        }\r\n  \r\n      } catch (error) {\r\n        setToggleOtp(false)\r\n        console.error(\"There was an error!\", error); // Handle error\r\n      }\r\n  };\r\n\r\n  useEffect(() => {\r\n    inputsRef.current[0].focus();\r\n  }, []);\r\n\r\n  return (\r\n    <div className=\"max-w-md mx-auto text-center bg-white px-4 sm:px-8 py-10 rounded-xl shadow\">\r\n      <header className=\"mb-8\">\r\n        <h1 className=\"text-2xl font-bold mb-1\">Mail Verification</h1>\r\n        <p className=\"text-[15px] text-slate-500\">Enter the 4-digit verification code that was sent to your mail.</p>\r\n      </header>\r\n      <form id=\"otp-form\" onSubmit={handleOtp}>\r\n        <div className=\"flex items-center justify-center gap-3\">\r\n          {otp.map((data, index) => (\r\n            <input\r\n              key={index}\r\n              type=\"text\"\r\n              maxLength=\"1\"\r\n              value={otp[index]}\r\n              onChange={(e) => handleChange(e.target, index)}\r\n              onKeyDown={(e) => {\r\n                if (e.key === 'Backspace' || e.key === 'Delete') handleBackspace(index);\r\n              }}\r\n              onPaste={handlePaste}\r\n              ref={(el) => (inputsRef.current[index] = el)}\r\n              className=\"w-14 h-14 text-center text-2xl font-extrabold text-slate-900 bg-slate-100 border border-transparent hover:border-slate-200 appearance-none rounded p-4 outline-none focus:bg-white focus:border-indigo-400 focus:ring-2 focus:ring-indigo-100\"\r\n            />\r\n          ))}\r\n        </div>\r\n        <div className=\"max-w-[260px] mx-auto mt-4\">\r\n          <button\r\n            type=\"submit\"\r\n            className=\"w-full inline-flex justify-center whitespace-nowrap rounded-lg bg-indigo-500 px-3.5 py-2.5 text-sm font-medium text-white shadow-sm shadow-indigo-950/10 hover:bg-indigo-600 focus:outline-none focus:ring focus:ring-indigo-300 focus-visible:outline-none focus-visible:ring focus-visible:ring-indigo-300 transition-colors duration-150\"\r\n          >\r\n            Verify Account\r\n          </button>\r\n        </div>\r\n      </form>\r\n      {/* <div className=\"text-sm text-slate-500 mt-4\">\r\n        Didn't receive code? <a className=\"font-medium text-indigo-500 hover:text-indigo-600\" href=\"#0\">Resend</a>\r\n      </div> */}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default OTPInput;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}